(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9ef321c4"],{"0368":function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"loading_container"},[e("div",{staticClass:"loading_img",style:{backgroundPositionY:-t.positionY%7*2.5+"rem"}}),e("svg",{staticClass:"load_ellipse",attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1"}}),e("ellipse",{staticStyle:{fill:"#ddd",stroke:"none"},attrs:{cx:"26",cy:"10",rx:"26",ry:"10"}})])},i=[],r={data:function(){return{positionY:0,timer:null}},mounted:function(){var t=this;this.timer=setInterval((function(){t.positionY++}),600)},beforeDestroy:function(){clearInterval(this.timer)}},n=r,c=(e("c5c4"),e("2877")),o=Object(c["a"])(n,a,i,!1,null,"100fda82",null);s["a"]=o.exports},"071c":function(t,s,e){},"07ac":function(t,s,e){var a=e("23e7"),i=e("6f53").values;a({target:"Object",stat:!0},{values:function(t){return i(t)}})},"1f05":function(t,s,e){"use strict";e("e50a")},"6f53":function(t,s,e){var a=e("83ab"),i=e("df75"),r=e("fc6a"),n=e("d1e7").f,c=function(t){return function(s){var e,c=r(s),o=i(c),l=o.length,u=0,d=[];while(l>u)e=o[u++],a&&!n.call(c,e)||d.push(t?[e,c[e]]:c[e]);return d}};t.exports={entries:c(!0),values:c(!1)}},b3fd:function(t,s,e){"use strict";e("071c")},ba1a:function(t,s,e){},c5c4:function(t,s,e){"use strict";e("ba1a")},e50a:function(t,s,e){},f392:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("header",{attrs:{id:"head_top"}},[t._t("logo"),t._t("search"),t.goBack?e("section",{staticClass:"head_goback",on:{click:function(s){return t.$router.go(-1)}}},[e("svg",{attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[e("polyline",{staticStyle:{fill:"none",stroke:"rgb(255,255,255)","stroke-width":"2"},attrs:{points:"12,18 4,9 12,0"}})])]):t._e(),t.signinUp?e("router-link",{staticClass:"head_login",attrs:{to:t.userInfo?"/profile":"/login"}},[t.userInfo?e("svg",{staticClass:"user_avatar"},[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#user"}})]):e("span",{staticClass:"login_span"},[t._v("登录|注册")])]):t._e(),e("section",{staticClass:"title_head ellipsis"},[e("span",{staticClass:"title_text"},[t._v(t._s(t.headTitle))])]),t._t("edit"),t._t("msite-title"),t._t("changecity"),t._t("changeLogin")],2)},i=[],r=e("5530"),n=e("2f62"),c={data:function(){return{}},mounted:function(){this.getUserInfo()},props:["signinUp","headTitle","goBack"],computed:Object(r["a"])({},Object(n["d"])(["userInfo"])),methods:Object(r["a"])({},Object(n["b"])(["getUserInfo"]))},o=c,l=(e("b3fd"),e("2877")),u=Object(l["a"])(o,a,i,!1,null,"84c4bcfe",null);s["a"]=u.exports},f934:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"confirmOrderContainer"},[t.showLoading?t._e():e("section",[e("head-top",{attrs:{"head-title":"确认订单",goBack:"true","signin-up":"confirmOrder"}}),e("router-link",{staticClass:"address_container",attrs:{to:{path:"/confirmOrder/chooseAddress",query:{id:t.checkoutData.cart.id,sig:t.checkoutData.sig}}}},[e("div",{staticClass:"address_empty_left"},[e("svg",{staticClass:"location_icon"},[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#location"}})]),t.chooseAddress?e("div",{staticClass:"address_detail_container"},[e("header",[e("span",[t._v(t._s(t.chooseAddress.name))]),e("span",[t._v(t._s(1==t.chooseAddress.sex?"先生":"女士"))]),e("span",[t._v(t._s(t.chooseAddress.phone))])]),e("div",{staticClass:"address_detail"},[t.chooseAddress.tag?e("span",{style:{backgroundColor:t.iconColor(t.chooseAddress.tag)}},[t._v(t._s(t.chooseAddress.tag))]):t._e(),e("p",[t._v(t._s(t.chooseAddress.address_detail))])])]):e("div",{staticClass:"add_address"},[t._v("请添加一个收货地址")])]),e("svg",{staticClass:"address_empty_right"},[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#arrow-right"}})])]),e("section",{staticClass:"delivery_model container_style"},[e("p",{staticClass:"deliver_text"},[t._v("送达时间")]),e("section",{staticClass:"deliver_time"},[e("p",[t._v("尽快送达 | 预计 "+t._s(t.checkoutData.delivery_reach_time)+" ")]),t.checkoutData.cart.is_deliver_by_fengniao?e("p",[t._v("蜂鸟专送")]):t._e()])]),e("section",{staticClass:"pay_way container_style"},[e("header",{staticClass:"header_style"},[e("span",[t._v("支付方式")]),e("div",{staticClass:"more_type",on:{click:t.showPayWayFun}},[e("span",[t._v("在线支付")]),e("svg",{staticClass:"address_empty_right"},[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#arrow-right"}})])])]),t._m(0)]),e("section",{staticClass:"food_list"},[t.checkoutData.cart.restaurant_info?e("header",[e("img",{attrs:{src:t.imgBaseUrl+t.checkoutData.cart.restaurant_info.image_path,alt:""}}),e("span",[t._v(t._s(t.checkoutData.cart.restaurant_info.name))])]):t._e(),t.checkoutData.cart.groups?e("ul",{staticClass:"food_list_ul"},t._l(t.checkoutData.cart.groups[0],(function(s){return e("li",{key:s.id,staticClass:"food_item_style"},[e("p",{staticClass:"food_name ellpsis"},[t._v(t._s(s.name))]),e("div",{staticClass:"num_price"},[e("span",[t._v("x "+t._s(s.quantity))]),e("span",[t._v("￥"+t._s(s.price))])])])})),0):t._e(),t.checkoutData.cart.extra?e("div",{staticClass:"food_item_style"},[e("p",{staticClass:"food_name ellipsis"},[t._v(t._s(t.checkoutData.cart.extra[0].name))]),e("div",{staticClass:"num_price"},[e("span"),e("span",[t._v("￥"+t._s(t.checkoutData.cart.extra[0].price))])])]):t._e(),e("div",{staticClass:"food_item_style"},[e("p",{staticClass:"food_name ellpsis"},[t._v("配送费")]),e("div",{staticClass:"num_price"},[e("span"),e("span",[t._v("￥"+t._s(t.checkoutData.cart.deliver_amount||0))])])]),e("div",{staticClass:"food_item_style total_price"},[e("p",{staticClass:"food_name ellipsis"},[t._v("订单 ￥"+t._s(t.checkoutData.cart.total))]),e("div",{staticClass:"num_price"},[e("span",[t._v("待支付 ￥"+t._s(t.checkoutData.cart.total))])])])]),e("section",{staticClass:"pay_way container_style"},[e("router-link",{staticClass:"header_style",attrs:{to:{path:"/confirmOrder/remark",query:{id:t.checkoutData.cart.id,sig:t.checkoutData.sig}}}},[e("span",[t._v("订单备注")]),e("div",{staticClass:"more_type"},[e("span",{staticClass:"ellpsis"},[t._v(t._s(t.remarkText||t.inputText?t.remarklist:"口味、偏好等"))]),e("svg",{staticClass:"address_empty_right"},[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#arrow-right"}})])])]),e("router-link",{staticClass:"hongbo",class:{support_is_available:t.checkoutData.invoice.is_available},attrs:{to:t.checkoutData.invoice.is_available?"/confirmOrder/invoice":""}},[e("span",[t._v("发票抬头")]),e("span",[t._v(" "+t._s(t.checkoutData.invoice.status_text)+" "),e("svg",{staticClass:"address_empty_right"},[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#arrow-right"}})])])])],1),e("section",{staticClass:"confrim_order"},[e("p",[t._v("待支付 ￥"+t._s(t.checkoutData.cart.total))]),e("p",{on:{click:t.confrimOrder}},[t._v("确认下单")])]),e("transition",{attrs:{name:"fade"}},[t.showPayWay?e("div",{staticClass:"cover",on:{click:t.showPayWayFun}}):t._e()]),e("transition",{attrs:{name:"slid_up"}},[t.showPayWay?e("div",{staticClass:"choose_type_Container"},[e("header",[t._v("支付方式")]),e("ul",t._l(t.checkoutData.payments,(function(s){return e("li",{key:s.id,class:{choose:t.payWayId==s.id}},[e("span",[t._v(t._s(s.name)+" "),s.is_online_payment?t._e():e("span",[t._v(t._s(s.description))])]),e("svg",{staticClass:"address_empty_right",on:{click:function(e){return t.choosePayWay(s.is_online_payment,s.id)}}},[e("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#select"}})])])})),0)]):t._e()])],1),t.showLoading?e("loading"):t._e(),e("transition",{attrs:{name:"router-slid",mode:"out-in"}},[e("router-view")],1)],1)},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"hongbo"},[e("span",[t._v("红包")]),e("span",[t._v("暂时只在饿了么APP中支持")])])}],r=(e("4160"),e("b0c0"),e("07ac"),e("159b"),e("e7e5"),e("d399")),n=(e("96cf"),e("1da1")),c=e("5530"),o=e("2f62"),l=e("f392"),u=e("1c03"),d=e("f96b"),_=e("0368"),h={name:"confirmOrder",data:function(){return{geohash:"",showLoading:!0,shopId:"",checkoutData:null,shopCart:null,showPayWay:!1,payWayId:1,imgBaseUrl:u["c"]}},components:{headTop:l["a"],Loading:_["a"]},created:function(){this.geohash=this.$route.query.geohash,this.shopId=this.$route.query.shopId,this.INIT_BUYCART(),this.SAVE_SHOPID(),this.shopCart=this.cartList[this.shopId]},computed:Object(c["a"])({},Object(o["d"])(["cartList","remarkText","inputText","invoice","chooseAddress","userInfo"])),mounted:function(){this.geohash&&(this.initData(),this.SAVE_GEOHASH(this.geohash))},methods:Object(c["a"])(Object(c["a"])({},Object(o["c"])(["SAVE_GEOHASH","INIT_BUYCART","SAVE_SHOPID","CHOOSE_ADDRESS","SAVE_ORDER_PARAM","NEED_VALIDATION","ORDER_SUCCESS"])),{},{initAddress:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var e;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t.userInfo||!t.userInfo.user_id){s.next=5;break}return s.next=3,Object(d["f"])(t.userInfo.user_id);case 3:e=s.sent,e instanceof Array&&e.length&&t.CHOOSE_ADDRESS({address:e[0],index:0});case 5:case"end":return s.stop()}}),s)})))()},initData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var e;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e=[],Object.values(t.shopCart).forEach((function(t){Object.values(t).forEach((function(t){Object.values(t).forEach((function(t){e.push({attrs:[],extra:{},id:t.id,name:t.name,packing_fee:t.packing_fee,price:t.price,quantity:t.num,sku_id:t.sku_id,specs:[t.specs],stock:t.stock})}))}))})),s.next=4,Object(d["b"])(t.geohash,[e],t.shopId);case 4:t.checkoutData=s.sent,t.showLoading=!1;case 6:case"end":return s.stop()}}),s)})))()},confrimOrder:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var e;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.userInfo&&t.userInfo.user_id){s.next=5;break}return r["a"].fail("请登录"),s.abrupt("return",!1);case 5:if(t.chooseAddress){s.next=8;break}return r["a"].fail("请选择地址"),s.abrupt("return",!1);case 8:return t.SAVE_ORDER_PARAM({user_id:t.userInfo.user_id,cart_id:t.checkoutData.cart.id,address_id:t.chooseAddress.id,description:t.remarklist,entities:t.checkoutData.cart.groups,geohash:t.geohash,sig:t.checkoutData.sig}),s.next=11,Object(d["m"])(t.userInfo.user_id,t.checkoutData.cart.id,t.chooseAddress.id,t.remarklist,t.checkoutData.cart.groups,t.geohash,t.checkoutData.sig);case 11:e=s.sent,e.need_validation?(t.NEED_VALIDATION(e),t.$router.push("/confirmOrder/userValidation")):(t.ORDER_SUCCESS(e),t.$router.push("/confirmOrder/payment"));case 13:case"end":return s.stop()}}),s)})))()},showPayWayFun:function(){this.showPayWay=!this.showPayWay},iconColor:function(t){switch(t){case"公司":return"#4cd964";case"学校":return"#3190e8"}},choosePayWay:function(t,s){t&&(this.showPayWay=!this.showPayWay,this.payWayId=s)}}),watch:{userInfo:function(t){t&&t.user_id&&this.initAddress()}}},p=h,f=(e("1f05"),e("2877")),v=Object(f["a"])(p,a,i,!1,null,"71c611b6",null);s["default"]=v.exports}}]);
//# sourceMappingURL=chunk-9ef321c4.4a210e8f.js.map