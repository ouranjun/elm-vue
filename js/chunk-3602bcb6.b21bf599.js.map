{"version":3,"sources":["webpack:///./src/views/search/search.vue?6374","webpack:///src/views/search/search.vue","webpack:///./src/views/search/search.vue?f246","webpack:///./src/views/search/search.vue","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./src/components/header/header.vue?c8b1","webpack:///./src/views/search/search.vue?6ab0","webpack:///./src/components/header/header.vue?14d9","webpack:///src/components/header/header.vue","webpack:///./src/components/header/header.vue?6e19","webpack:///./src/components/header/header.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","directives","name","rawName","value","expression","domProps","on","$event","target","composing","searchValue","checkInput","preventDefault","searchTarget","restaurantList","_v","_l","item","key","id","path","query","imgBaseUrl","image_path","_s","staticStyle","month_sales","recent_order_num","delivery_fee","float_minimum_order_amount","distance","activities","style","backgroundColor","icon_color","icon_name","_e","searchHistory","length","showHistory","index","deleteHistory","clearAllHistory","staticRenderFns","data","geohash","emptyResult","components","headTop","methods","splice","mounted","$route","params","component","$","toAbsoluteIndex","toInteger","toLength","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","ACCESSORS","0","1","max","Math","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","proto","forced","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","O","len","actualStart","argumentsLength","arguments","TypeError","_t","$router","go","userInfo","headTitle","getUserInfo","props","computed"],"mappings":"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","file":"js/chunk-3602bcb6.b21bf599.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search_container\"},[_c('div',{staticClass:\"clearfixed\"},[_c('head-top',{attrs:{\"goBack\":\"true\",\"headTitle\":\"搜索\"}})],1),_c('form',{staticClass:\"search_form\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchValue),expression:\"searchValue\"}],staticClass:\"search_input\",attrs:{\"type\":\"text\",\"name\":\"search\",\"placeholder\":\"请输入商家或美食名称\"},domProps:{\"value\":(_vm.searchValue)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.searchValue=$event.target.value},_vm.checkInput]}}),_c('input',{staticClass:\"search_submit\",attrs:{\"type\":\"submit\",\"name\":\"submit\"},on:{\"click\":function($event){$event.preventDefault();return _vm.searchTarget('')}}})]),(_vm.restaurantList.length)?_c('section',[_c('h4',{staticClass:\"title_restaurant\"},[_vm._v(\"商家\")]),_c('ul',{staticClass:\"list_container\"},_vm._l((_vm.restaurantList),function(item){return _c('router-link',{key:item.id,staticClass:\"list_li\",attrs:{\"to\":{path: '/shop', query: {id: item.id}},\"tag\":\"li\"}},[_c('section',{staticClass:\"item_left\"},[_c('img',{staticClass:\"restaurant_img\",attrs:{\"src\":_vm.imgBaseUrl + item.image_path,\"alt\":\"\"}})]),_c('section',{staticClass:\"item_right\"},[_c('div',{staticClass:\"item_right_text\"},[_c('p',[_c('span',[_vm._v(_vm._s(item.name))]),_c('svg',{staticClass:\"pay_icon\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"version\":\"1.1\",\"width\":\"24\",\"height\":\"14\"}},[_c('polygon',{staticStyle:{\"fill\":\"none\",\"stroke\":\"#FF6000\",\"stroke-width\":\"1\"},attrs:{\"points\":\"0,14 4,0 24,0 20,14\"}}),_c('line',{staticStyle:{\"stroke\":\"#FF6000\",\"stroke-width\":\"1.5\"},attrs:{\"x1\":\"1.5\",\"y1\":\"12\",\"x2\":\"20\",\"y2\":\"12\"}}),_c('text',{staticStyle:{\"fill\":\"#FF6000\",\"font-size\":\"9\",\"font-weight\":\"bold\"},attrs:{\"x\":\"3.5\",\"y\":\"9\"}},[_vm._v(\"支付\")])])]),_c('p',[_vm._v(\"月售\"+_vm._s(item.month_sales || item.recent_order_num)+\"单\")]),_c('p',[_vm._v(_vm._s(item.delivery_fee||item.float_minimum_order_amount)+\" 元起送 / 距离\"+_vm._s(item.distance))])]),_c('ul',{staticClass:\"item_right_detail\"},_vm._l((item.restaurant_acticity),function(activities){return _c('li',{key:activities.id},[_c('span',{staticClass:\"activities_icon\",style:({backgroundColor: '#' + activities.icon_color})},[_vm._v(_vm._s(activities.icon_name))]),_c('span',[_vm._v(_vm._s(activities.name))]),_c('span',{staticClass:\"only_phone\"},[_vm._v(\"(手机客户端专享)\")])])}),0)])])}),1)]):_vm._e(),(_vm.searchHistory.length && _vm.showHistory)?_c('section',{staticClass:\"search_history\"},[_c('h4',{staticClass:\"title_restaurant\"},[_vm._v(\"搜索历史\")]),_c('ul',_vm._l((_vm.searchHistory),function(item,index){return _c('li',{key:index,staticClass:\"history_list\"},[_c('span',{staticClass:\"history_text ellpsis\",on:{\"click\":function($event){return _vm.searchTarget(item)}}},[_vm._v(_vm._s(item))]),_c('svg',{staticClass:\"delete_icon\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"version\":\"1.1\"},on:{\"click\":function($event){return _vm.deleteHistory(index)}}},[_c('line',{staticStyle:{\"stroke\":\"#999\",\"stroke-width\":\"3\"},attrs:{\"x1\":\"8\",\"y1\":\"8\",\"x2\":\"18\",\"y2\":\"18\"}}),_c('line',{staticStyle:{\"stroke\":\"#999\",\"stroke-width\":\"3\"},attrs:{\"x1\":\"18\",\"y1\":\"8\",\"x2\":\"8\",\"y2\":\"18\"}})])])}),0),_c('footer',{staticClass:\"clear_history\",on:{\"click\":_vm.clearAllHistory}},[_vm._v(\"清空搜索历史\")])]):_vm._e(),(_vm.emptyResult)?_c('div',{staticClass:\"search_none\"},[_vm._v(\"很抱歉！无搜索结果\")]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"search_container\">\r\n    <div class=\"clearfixed\">\r\n    <head-top goBack='true' headTitle=\"搜索\">\r\n    </head-top>\r\n    </div>\r\n    <!-- 搜索框 -->\r\n      <form class=\"search_form\">\r\n        <input type=\"text\" name=\"search\" class=\"search_input\" v-model=\"searchValue\" @input=\"checkInput\" placeholder=\"请输入商家或美食名称\" />\r\n        <input type=\"submit\" name=\"submit\" class=\"search_submit\" @click.prevent = \"searchTarget('')\" />\r\n      </form>\r\n    <!-- 商家 -->\r\n    <section v-if=\"restaurantList.length\">\r\n      <h4 class=\"title_restaurant\">商家</h4>\r\n      <ul class=\"list_container\">\r\n        <router-link :to=\"{path: '/shop', query: {id: item.id}}\" tag=\"li\" v-for=\"item in restaurantList\" :key=\"item.id\" class=\"list_li\">\r\n        <section class=\"item_left\">\r\n          <img :src=\"imgBaseUrl + item.image_path\" class=\"restaurant_img\" alt=\"\">\r\n        </section>\r\n        <section class=\"item_right\">\r\n          <div class=\"item_right_text\">\r\n            <p>\r\n              <span>{{item.name}}</span>\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"14\" class=\"pay_icon\">\r\n                <polygon points=\"0,14 4,0 24,0 20,14\" style=\"fill:none;stroke:#FF6000;stroke-width:1\" />\r\n                <line x1=\"1.5\" y1=\"12\" x2=\"20\" y2=\"12\" style=\"stroke:#FF6000;stroke-width:1.5\"/>\r\n                <text x=\"3.5\" y=\"9\" style=\"fill:#FF6000;font-size:9;font-weight:bold;\">支付</text>\r\n              </svg>\r\n            </p>\r\n            <p>月售{{item.month_sales || item.recent_order_num}}单</p>\r\n            <p>{{item.delivery_fee||item.float_minimum_order_amount}} 元起送 / 距离{{item.distance}}</p>\r\n          </div>\r\n          <ul class=\"item_right_detail\">\r\n            <li v-for=\"activities in item.restaurant_acticity\" :key=\"activities.id\">\r\n              <span :style=\"{backgroundColor: '#' + activities.icon_color}\" class=\"activities_icon\">{{activities.icon_name}}</span>\r\n              <span>{{activities.name}}</span>\r\n              <span class=\"only_phone\">(手机客户端专享)</span>\r\n            </li>\r\n          </ul>\r\n        </section>\r\n        </router-link>\r\n      </ul>\r\n    </section>\r\n    <!-- 搜索历史 -->\r\n    <section class=\"search_history\" v-if=\"searchHistory.length && showHistory\">\r\n      <h4 class=\"title_restaurant\">搜索历史</h4>\r\n      <ul>\r\n        <li v-for=\"(item, index) in searchHistory\" :key=\"index\" class=\"history_list\">\r\n          <span class=\"history_text ellpsis\" @click=\"searchTarget(item)\">{{item}}</span>\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" class=\"delete_icon\" @click=\"deleteHistory(index)\">\r\n            <line x1=\"8\" y1=\"8\" x2=\"18\" y2=\"18\" style=\"stroke:#999;stroke-width:3\" />\r\n            <line x1=\"18\" y1=\"8\" x2=\"8\" y2=\"18\" style=\"stroke:#999;stroke-width:3\" />\r\n          </svg>\r\n        </li>\r\n      </ul>\r\n      <footer class=\"clear_history\" @click=\"clearAllHistory\">清空搜索历史</footer>\r\n    </section>\r\n    <div class=\"search_none\" v-if=\"emptyResult\">很抱歉！无搜索结果</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport headTop from '@/components/header/header'\r\nimport { imgBaseUrl } from '../../http/http'\r\nimport { searchRestaurant } from '@/http/api'\r\nimport { Toast } from 'vant'\r\nimport { getStore, setStore, removeStore } from '@/config/mUtil'\r\n\r\nexport default {\r\n  name: 'search',\r\n  data () {\r\n    return {\r\n      geohash: '', // msite页面传递过来的地址信息\r\n      searchValue: '', // 搜索内容\r\n      restaurantList: [], // 搜索返回结果\r\n      showHistory: true, // 是否显示历史记录，只有在返回搜素结果后隐藏\r\n      searchHistory: [], // 历史记录\r\n      emptyResult: false, // 搜索结果为空时显示\r\n      imgBaseUrl // 图片地址\r\n    }\r\n  },\r\n  components: {\r\n    headTop\r\n  },\r\n  methods: {\r\n    // 点击提交按钮，搜索结果并显示，同时将搜索内容存入历史记录\r\n    async searchTarget (historyValue) {\r\n      if (historyValue) {\r\n        this.searchValue = historyValue\r\n      } else if (!this.searchValue) {\r\n        Toast('请输入内容！')\r\n        return false\r\n      }\r\n      // 隐藏历史记录\r\n      this.showHistory = false\r\n      Toast.loading({\r\n        message: '搜索中...',\r\n        forbidClick: true\r\n      })\r\n      this.restaurantList = await searchRestaurant({\r\n        'extras[]': 'restaurant_activity',\r\n        geohash: this.geohash,\r\n        keyword: this.searchValue,\r\n        type: 'search'\r\n      })\r\n      this.emptyResult = !this.restaurantList.length\r\n\r\n      const history = getStore('searchHistory')\r\n      if (history) {\r\n        let checkrepeat = false\r\n        this.searchHistory = JSON.parse(history)\r\n        // 判断是否存在一样的历史记录\r\n        // 没有则新增 如果有则不做重复储存\r\n        this.searchHistory.forEach(item => {\r\n          if (item === this.searchValue) {\r\n            checkrepeat = true\r\n          }\r\n        })\r\n        if (!checkrepeat) {\r\n          this.searchHistory.push(this.searchValue)\r\n        }\r\n      } else {\r\n        this.searchHistory.push(this.searchValue)\r\n      }\r\n      setStore('searchHistory', this.searchHistory)\r\n    },\r\n    // 删除历史记录\r\n    deleteHistory (index) {\r\n      this.searchHistory.splice(index, 1)\r\n      setStore('searchHistory', this.searchHistory)\r\n    },\r\n    // 清空历史记录\r\n    clearAllHistory () {\r\n      this.searchHistory = []\r\n      removeStore('searchHistory')\r\n    },\r\n    // 输入框更变时\r\n    checkInput () {\r\n      if (this.searchValue === '') {\r\n        this.showHistory = true // 显示历史记录\r\n        this.restaurantList = [] // 清空搜索结果\r\n        this.emptyResult = false // 隐藏搜索为空时提示\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    this.geohash = this.$route.params.geohash\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='scss' scoped>\r\n  @import '../../style/mixin';\r\n  .search_container {\r\n    .search_form {\r\n      background: #fff;\r\n      padding: 0.5rem;\r\n      display: flex;\r\n      input {\r\n        height: 1.5rem;\r\n      }\r\n      .search_input {\r\n        flex: 4;\r\n        border: 0.025rem solid $bc;\r\n        @include sc(0.65rem, #333);\r\n        border-radius: 0.125rem;\r\n        background-color: #f2f2f2;\r\n        font-weight: bold;\r\n        padding: 0 0.25rem;\r\n      }\r\n      .search_submit {\r\n        flex: 1;\r\n        border: 0.025rem solid $blue;\r\n        margin-left: 0.2rem;\r\n        @include sc(0.65rem, #fff);\r\n        border-radius: 0.125rem;\r\n        background-color: $blue;\r\n        font-weight: bold;\r\n        padding: 0 0.25rem;\r\n      }\r\n    }\r\n    .search_history {\r\n      .history_list {\r\n        background-color: #fff;\r\n        border-bottom: 0.025rem solid $bc;\r\n        @include font(0.7rem, 2rem);\r\n        padding: 0 0.3rem;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        .history_text {\r\n          display: inline-block;\r\n          width: 80%;\r\n        }\r\n        .delete_icon {\r\n          @include wh(1rem, 1rem)\r\n        }\r\n      }\r\n      .clear_history {\r\n        margin-bottom: 2rem;\r\n        text-align: center;\r\n        background-color: #fff;\r\n        color: #3190e8;\r\n        padding: 0.5rem;\r\n        font-size: 0.8rem;\r\n      }\r\n    }\r\n    .title_restaurant {\r\n      font-size: 0.6rem;\r\n      line-height: 2rem;\r\n      text-indent: 0.5rem;\r\n      font-weight: bold;\r\n      color: #666;\r\n    }\r\n    .list_container {\r\n      background-color: #fff;\r\n      margin-bottom: 2rem;\r\n    }\r\n    .list_li {\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      padding: 0.5rem;\r\n      border-bottom: 0.025rem solid $bc;\r\n      .item_left {\r\n        margin-right: 0.25rem;\r\n        .restaurant_img {\r\n          @include wh(1.7rem, 1.7rem)\r\n        }\r\n      }\r\n      .item_right {\r\n        font-size: 0.55rem;\r\n        flex: 1;\r\n        .item_right_text {\r\n          padding-bottom: 0.25rem;\r\n        }\r\n      }\r\n    }\r\n    .search_none {\r\n      color: #ccc;\r\n      font-size: 0.7rem;\r\n      text-align: center;\r\n      padding: 0.7rem;\r\n      background: #fff;\r\n      border-top: 1px #eee solid;\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search.vue?vue&type=template&id=8b11dbd8&scoped=true&\"\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&id=8b11dbd8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8b11dbd8\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('splice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./header.vue?vue&type=style&index=0&id=84c4bcfe&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=style&index=0&id=8b11dbd8&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',{attrs:{\"id\":\"head_top\"}},[_vm._t(\"logo\"),_vm._t(\"search\"),(_vm.goBack)?_c('section',{staticClass:\"head_goback\",on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_c('svg',{attrs:{\"width\":\"100%\",\"height\":\"100%\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"version\":\"1.1\"}},[_c('polyline',{staticStyle:{\"fill\":\"none\",\"stroke\":\"rgb(255,255,255)\",\"stroke-width\":\"2\"},attrs:{\"points\":\"12,18 4,9 12,0\"}})])]):_vm._e(),(_vm.signinUp)?_c('router-link',{staticClass:\"head_login\",attrs:{\"to\":_vm.userInfo? '/profile':'/login'}},[(_vm.userInfo)?_c('svg',{staticClass:\"user_avatar\"},[_c('use',{attrs:{\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"xlink:href\":\"#user\"}})]):_c('span',{staticClass:\"login_span\"},[_vm._v(\"登录|注册\")])]):_vm._e(),_c('section',{staticClass:\"title_head ellipsis\"},[_c('span',{staticClass:\"title_text\"},[_vm._v(_vm._s(_vm.headTitle))])]),_vm._t(\"edit\"),_vm._t(\"msite-title\"),_vm._t(\"changecity\"),_vm._t(\"changeLogin\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <header id=\"head_top\">\r\n    <slot name=\"logo\"></slot>\r\n    <slot name=\"search\"></slot>\r\n    <section class=\"head_goback\" v-if=\"goBack\" @click=\"$router.go(-1)\">\r\n      <svg width=\"100%\" height=\"100%\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">\r\n        <polyline points=\"12,18 4,9 12,0\" style=\"fill:none;stroke:rgb(255,255,255);stroke-width:2\"/>\r\n      </svg>\r\n    </section>\r\n    <router-link :to=\"userInfo? '/profile':'/login'\" v-if='signinUp' class=\"head_login\">\r\n      <svg class=\"user_avatar\" v-if=\"userInfo\">\r\n        <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#user\"></use>\r\n      </svg>\r\n      <span class=\"login_span\" v-else>登录|注册</span>\r\n    </router-link>\r\n    <section class=\"title_head ellipsis\">\r\n      <span class=\"title_text\">{{headTitle}}</span>\r\n    </section>\r\n    <slot name=\"edit\"></slot>\r\n    <slot name=\"msite-title\"></slot>\r\n    <slot name=\"changecity\"></slot>\r\n    <slot name=\"changeLogin\"></slot>\r\n  </header>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from 'vuex'\r\nexport default {\r\n  data () {\r\n    return {\r\n    }\r\n  },\r\n  mounted () {\r\n    // 获取用户信息\r\n    this.getUserInfo()\r\n  },\r\n  props: ['signinUp', 'headTitle', 'goBack'],\r\n  computed: {\r\n    ...mapState([\r\n      'userInfo'\r\n    ])\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      'getUserInfo'\r\n    ])\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  @import '../../style/mixin';\r\n  #head_top {\r\n    background-color: $blue;\r\n    position: fixed;\r\n    z-index: 100;\r\n    left: 0;\r\n    top: 0;\r\n    @include wh(100%, 1.95rem)\r\n  }\r\n  .head_goback {\r\n    left: 0.4rem;\r\n    @include wh(0.6rem, 1rem);\r\n    line-height: 2.2rem;\r\n    margin-left: 0.4rem;\r\n  }\r\n  .head_login {\r\n    right: 0.55rem;\r\n    @include sc(0.65rem, #fff);\r\n    @include ct;\r\n    .login_span {\r\n      color: #fff;\r\n    }\r\n    .user_avatar {\r\n      fill: #fff;\r\n      @include wh(0.8rem, 0.8rem)\r\n    }\r\n  }\r\n  .title_head {\r\n    @include center;\r\n    width: 50%;\r\n    color: #fff;\r\n    text-align: center;\r\n    .title_text {\r\n      @include sc(0.8rem, #fff);\r\n      text-align: center;\r\n      font-weight: bold;\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./header.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./header.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./header.vue?vue&type=template&id=84c4bcfe&scoped=true&\"\nimport script from \"./header.vue?vue&type=script&lang=js&\"\nexport * from \"./header.vue?vue&type=script&lang=js&\"\nimport style0 from \"./header.vue?vue&type=style&index=0&id=84c4bcfe&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"84c4bcfe\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}